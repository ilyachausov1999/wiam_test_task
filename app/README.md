Обработчик кредитных заявок (тестовое задание для Wiam Group)
Приложение обрабатывает заявки пользователей на кредит, обеспечивая целостность данных и предотвращая условия гонки с помощью механизмов блокировки в базе данных PostgreSQL. Проект предоставляет API из 2 методов: POST /requests и GET /processor?delay=5. Первый позволяет создавать новые заявки на кредит от пользователей, а второй запускает обработку всех необработанных заявок. Обработка заявок сводится к изменению статуса на Одобрено или Отказано. Решение принимается случайным образом с вероятностью 10% в пользу одобрения. При этом, если у пользователя уже есть хотя бы одна одобренная заявка, то все новые заявки должны получать отказ.

По условию задачи возможен одновременный запуск нескольких процессов обработки заявок, что не должно мешать корректному выполнению и сохранению базовых условий: не более одной одобренной заявки на пользователя. При этом в обработке заявки добавлена эмуляция задержки, длительность которой в секундах передаётся в GET-параметре delay.

На выполнение задание потрачено около 1 дня (точно не считал) тк выполнял в течениеи нескольких дней по паре часов в день

Кроме обозначенных в ТЗ условий добавил консольную команду для создания дополнительных пользователей для тестов, и  команду для запуска процесса обработки например через крон или просто руками 

## Установка

```bash
git clone https://github.com/ilyachausov1999/wiam_test_task.git
cd wiam-wiam_test_task
sudo docker-compose up -d
docker-compose exec php composer install
```

ENV файл в гитигнор не добавлял тк тест задание, его добавлять не надо там уже все есть

```bash
docker-compose exec php php yii migrate
создать тестовых юзеров
docker-compose exec php php yii fixture/load User
добавить произвольного юзера 
docker-compose exec php php yii user/create "john_doe" "john.doe@example.com" "secure_password123"
запустить консольное выполнение обработки заявок
docker-compose exec php php yii processor/index
```

## P.S

Из доработок в идеале вынести все это дело в очередь например RabbitMQ/Kafka
Написать sh скрипт для развертывания проекта одной командой
Сделать автогенераций swagger документации (на Laravel это решается установкой одной библиотеки), тут несколько сложнее

Делать все это на не таком архаичном фрэймворке:))))

## Пригодится для тестов
POST 127.0.0.1/request/create
{
"user_id": 1,
"amount": 1050,
"term": 13
}

GET 127.0.0.1/processor?delay=3